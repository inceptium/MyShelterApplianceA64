var caricaGruppo=function(a){var d;var b=a;var c=this;this.caricaElementiDaLocalStorage=function(){$("#contenuto").remove();$("#principale").append('<div id="contenuto" data-id="'+b+'"></div>');$("#contenuto").append('<div id="textaree"></div>');flag=0;if(arrayGruppi["gruppo_"+b]!=undefined){flag=1;var f=arrayGruppi["gruppo_"+b]}if(flag==0){f=JSON.parse(localStorage.getItem("gruppo_"+b));arrayGruppi["gruppo_"+b]=f}for(i=0;i<f.length;i++){c.caricaGruppo(f[i])}window.setTimeout(function(){for(i=0;i<arrayElementi.length;i++){arrayElementi[i].rinfresca()}},200);var e=false;for(i=0;i<arrayIdGruppi.length;i++){if(arrayIdGruppi[i]==b){e=true}}if(!e){arrayIdGruppi.push(b)}};this.caricaGruppo=function(t){var f=t[0];var q=t[1];var m=t[2];var e=t[3];var r=t[4];var o=t[5];var j=t[6];var h=t[7];var n=t[8];if(b==j){$("#contenuto").append('<canvas id="canvas'+f+'" data-id="'+f+'" width="142" height="110"></canvas>');$("#nomeGruppoV").empty();$("#nomeGruppoV").append(n);var g=document.getElementById("canvas"+f);var p=g.getContext("2d");var l=new elemento();var s=new elaboraStringhe();h=s.elaboraCurrentextvalue(h);var k=s.getNumeroRigheStatusMonitor();l.setIdElemento(f);l.setIdGruppo(b);l.setSetIcone(localStorage.setIcone);l.setMioContesto(p);l.setStatoCorrente(m);l.setTipoElemento(q);l.setRigheStatusMonitor(k);l.setMioCanvas(g);l.setEtichetta(r);l.setValoreNumerico(e);l.setValoreStringa(h);l.setValoreLabel(o);arrayElementi.push(l)}};this.carica=function(){leggiXml1=new leggiXml();leggiXml1.setGruppoChiamante(c);if(localStorage.getItem("gruppo_"+b)==null){leggiXml1.caricaXml()}else{c.caricaElementiDaLocalStorage()}gruppoInCarica=false;if(primoAvvio==false){primoAvvio=true;window.setTimeout(function(){var e=new cambiaStato();e.aggiorna()},1000)}};this.setXmlLetto=function(e){d=e};this.caricaXml=function(f){$("#contenuto").remove();$("#principale").append('<div id="contenuto" data-id="'+b+'"></div>');var g=new Array();$(f).find("elemento").each(function(){var j=$(this).attr("id");var p=$(this).attr("type");var m=$(this).attr("status");var h=$(this).attr("currentvalue");var q=$(this).attr("title");var o=$(this).attr("label_value");var l=$(this).attr("id_group");var k=$(this).attr("currenttextvalue");var n=$(this).attr("des_group");var r=new Array;r[0]=j;r[1]=p;r[2]="0";r[3]=h;r[4]=q;r[5]=o;r[6]=l;r[7]=k;r[8]=n;c.caricaGruppo(r);if(b==l){g.push(r)}});localStorage.setItem("gruppo_"+b,JSON.stringify(g));window.setTimeout(function(){for(i=0;i<arrayElementi.length;i++){arrayElementi[i].rinfresca()}},200);var e=false;for(i=0;i<arrayIdGruppi.length;i++){if(arrayIdGruppi[i]==b){e=true}}if(!e){arrayIdGruppi.push(b)}}};